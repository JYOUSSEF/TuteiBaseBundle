<!DOCTYPE html>
<html lang="{{ app.request.locale|split('_')[0] }}">
    <head>
        {% if location is not defined %}
            {% set location = null %}
        {% endif %}
        
        {% if location.pathString is defined %}
            {% set title %}
                {{ render( controller( "tutei:showComponent", { 'name':'Title', 'parameters':{'pathString': location.pathString } } ) ) }}
            {% endset %}
        {% elseif content is defined%}
            {% set title %}
                    {{ content.contentInfo.name }} / (location ID is #{{ location.id }})
            {% endset %}
        {% elseif title is not defined %}
            {% set title %}
                    {{ name|default( 'Home' ) }}
            {% endset %}
                    
        {% endif %}

        <title>{{ title }}</title>

        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="">
        <meta name="author" content="">
        <!-- Bootstrap -->

        <!-- Include all compiled plugins (below), or include individual files as needed
            Not using bootstrap-theme.min.css -->
        {% stylesheets 
            "bundles/tuteibase/css/bootstrap.min.css"
            "bundles/tuteibase/css/font-awesome.min.css"
            "bundles/tuteibase/css/lightbox.css"
            "bundles/tuteibase/css/project.css"
            filter='cssrewrite' %}
        <link rel="stylesheet" href="{{ asset_url }}" />
        {% endstylesheets %}
        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->       
        <script src="https://code.jquery.com/jquery.js"></script>


        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
          <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
          <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
    </head>
    <body>
        <div class="container">
            <header class="header">
            <div class="row">
                    <div class="col-sm-6 company-logo"><a class="navbar-brand" href="/">Tutei Base</a></div>
                    <div class="col-sm-6">
                        <div class="pull-right user-menu">
                            <ul class="list-unstyled list-inline">
                                {{ render( controller( "tutei:showComponent", { 'name': 'UserMenu' } ) ) }}
                            </ul>
                        </div>
                    </div>
            </div>
            </header>
        </div>
        
        <div class="navbar navbar-default" role="navigation">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="sr-only">Toggle navigation</span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    
                </div>
                <div class="navbar-collapse collapse top-menu">

                    <ul class="nav navbar-nav">
                        {{ render( controller( "tutei:showComponent", { 'name': 'TopMenu','parameters' : {'pathString': location.pathString } } ) ) }}
                    </ul>
                    <form class="navbar-form navbar-right" role="form" method="get" action="{{ path( 'ez_legacy', {'module_uri': '/content/search'} ) }}">
                        <div class="form-group">
                            <input type="text" placeholder="Text" class="form-control" id="search_text" name="search_text">
                        </div>
                        <button type="submit" class="btn btn-success">Search</button>
                    </form>
                    
                </div><!--/.navbar-collapse -->
            </div>

        </div>

        <div class="container">
            <div class="row">
                {% if location.pathString is defined %}
                    {{ render( controller( "tutei:showComponent", { 'name' : 'Banners','parameters' : {'pathString': location.pathString } } ) ) }}
                {% endif %}
                

                {% set showSideMenu = false %}
                {% if location.pathString is defined
                    and location.pathString|split('/')[3] != '' %}
            
                {#  TODO:
                    use content.contentInfo.contentTypeId to filter wheter or not
                    show side menu

                #}
                    {% set showSideMenu = true %}
                {% endif %}
                    {% if showSideMenu %}
                        <div class="col-md-3">
                            {{ render( controller( "tutei:showComponent", { 'name':'SideMenu',
                                             'parameters': { 'pathString': location.pathString } } ) ) }}
                            {{ render( controller( "tutei:showComponent",
                                                        { 'name':'ExtraInfo',
                                                          'parameters': { 'pathString': location.pathString } } ) ) }}
                        </div>                       
                    {% endif %} 
                        <div class="col-md-{% if showSideMenu %}9{% else %}12{% endif %}">     

                            {% if location.pathString is defined
                                    and location.pathString|split('/')[3] != ''  %}
                                {{ render( controller( "tutei:showComponent",
                                                        { 'name':'Breadcrumb',
                                                          'parameters': { 'pathString': location.pathString } } ) ) }}
                            {% endif %}
                            {% block content %}{% endblock %}
                            {% if location.pathString is defined %}
                                {{ render( controller( "tutei:showComponent", {'name':'Blocks', 'parameters': { 'pathString': location.pathString } } ) ) }}
                            {% endif %}
                        </div>

                
            </div>

            <hr>

            <footer>
                <div class="row">
                    <div class="col-md-4">
                        <!-- About -->
                        <h2>About</h2> 
                        <p>TuteiBaseBundle is a clean eZ publish 5 bundle that features common features and also an installer script.</p>                            
                    </div><!--/col-md-4--> 
                    
                    <div class="col-md-4">
                        <!-- Monthly Newsletter -->
                        <div class="headline"><h2>Contact Us</h2></div> 
                        <address>
                            101, BaseBundle Street, eZ publish<br>
                            Community, NO <br>
                            Phone: 555 555 5555<br>
                            Fax: 555 555 5555<br>
                            Email: <a class="" href="mailto:nospam@company.com">nospam@company.com</a>
                        </address>                        
                    </div><!--/col-md-4-->

                    <div class="col-md-4">
                        <!-- Stay Connected -->
                        <div class="headline"><h2>Stay Connected</h2></div> 
                        <div id="social-bar">
                            <a href="https://www.facebook.com/thiagocamposviana" target="_blank">
                                <span class="fa-stack fa-lg icon-facebook">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-facebook fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                            <a href="https://twitter.com/tcv_br" target="_blank">
                                <span class="fa-stack fa-lg icon-twitter">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                 </span>
                            </a>
                            <a href="https://plus.google.com/116026022246221247074/" target="_blank">
                                <span class="fa-stack fa-lg icon-google-plus">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-google-plus fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                            <a href="mailto:thiagocamposviana@gmail.com">
                                <span class="fa-stack fa-lg icon-rss">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                            <a href="https://github.com/thiagocamposviana/TuteiBaseBundle">
                                <span class="fa-stack fa-lg icon-github">
                                    <i class="fa fa-circle fa-stack-2x"></i>
                                    <i class="fa fa-github-alt fa-stack-1x fa-inverse"></i>
                                </span>
                            </a>
                        </div>
                    </div><!--/col-md-4-->
                    
                </div>

              </footer>
            
              <hr>
              
              <div class="copyright">
                  <p class="pull-right"><a href="#top">Back to top</a></p>
                  <p>Created by <a href="mailto:thiagocamposviana@gmail.com">Thiago Campos Viana</a></p>
                  
              </div>
            
        </div> <!-- /container -->

        {% javascripts
            '@eZDemoBundle/Resources/public/js/hinclude.js'
            "bundles/tuteibase/js/bootstrap.min.js"
            "bundles/tuteibase/js/lightbox-2.6.min.js"
            "bundles/tuteibase/js/project.js"
        %}
        <script type="text/javascript" src="{{ asset_url }}"></script>
        {% endjavascripts %}
        
        {% if google_analytics_id is not null and
              google_analytics_site is not null %}
        <script>
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

            ga('create', '{{google_analytics_id}}', '{{google_analytics_site}}');
            ga('send', 'pageview');

        </script>
        {% endif %}

    </body>
</html>